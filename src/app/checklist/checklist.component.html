<mat-sidenav-container class="side-container">
  <mat-sidenav mode="side" opened>
    <mat-nav-list>
      <mat-accordion>
        <ng-container *ngFor="let p of projectData?.categories;let i = index">
          <mat-expansion-panel [expanded]="i === 0" (opened)="setCurrentCategory(p)">
            <mat-expansion-panel-header>
              <mat-panel-title>
                <b>{{i+1}}. {{p.name}} </b>
              </mat-panel-title>
              <!-- <mat-icon style="margin-right: 20px; color: green" *ngIf="p.status" aria-hidden="false" aria-label="Example home icon" matTooltip="Answer is submitted for this category"
              matTooltipClass="tooltip-blue" matTooltipPosition="above">done</mat-icon> -->
              <img style="margin-right: 20px;" *ngIf="p.status" src="{{projectService.getImagepath()}}/Group 142.svg" matTooltip="Answer is submitted for this category"
              matTooltipClass="tooltip-blue" matTooltipPosition="above">
            </mat-expansion-panel-header>
            <div class="catque" *ngFor="let l1 of p.questions | mainQuestions;let i = index">
              <p>{{i+1}}. {{l1.question}}
                <i *ngIf="l1.tooltip !== null" class="material-icons" [matTooltip]="l1.tooltip"
                  matTooltipClass="tooltip-blue" matTooltipPosition="right">
                  info
                </i>
                <span class="score">Score : {{l1.score}}</span>
              </p>

              <div class="optionss">
                <mat-radio-group aria-labelledby="example-radio-group-label" class="example-radio-group"
                  [(ngModel)]="l1.selectedOption">
                  <mat-radio-button class="example-radio-button" *ngFor="let option of options;" [value]="option.qId"
                    (change)="onRadioOptionChangeLevel2(l1.id, option.qId)">

                    {{option.ans}}
                  </mat-radio-button>
                </mat-radio-group>
              </div>
            </div>
          </mat-expansion-panel>
        </ng-container>
      </mat-accordion>
    </mat-nav-list>
  </mat-sidenav>
  <mat-sidenav-content>
    <div class="main-content">
      <!-- {{projectData | json}} -->
      <!-- {{questiondatalevel2 | json}} -->
      <div class="project-info">
        <div class="project-name">
          <h4>Project: {{projectData?.project_name}}</h4>
        </div>
        <div class="unit">
          <h4>Business Unit: {{projectData?.bu_name}}</h4>
        </div>
        <div class="sub-unit">
          <h4>Sub Business: {{projectData?.sub_bu_name}}</h4>
        </div>
      </div>
      <div class="aside-content" *ngFor="let l2 of questiondatalevel2">
        <p>{{l2.question}} <i *ngIf="l2.tooltip !== null" class="material-icons" [matTooltip]="l2.tooltip"
            matTooltipClass="tooltip-blue" matTooltipPosition="right">
            info
          </i>
          <!-- <span class="score">Score : {{l2.score}}</span> -->
        </p>
        <div class="optionss">
          <mat-radio-group aria-labelledby="example-radio-group-label" class="example-radio-group"
            [(ngModel)]="l2.selectedOption">
            <mat-radio-button class="example-radio-button" *ngFor="let option of options;" [value]="option.qId"
              (change)="onRadioOptionChangeLevel3(l2.id, option.qId)">

              {{option.ans}}
            </mat-radio-button>
          </mat-radio-group>
          <div class="comment">
            <mat-form-field appearance="outline">
              <mat-label>Add Comment</mat-label>
              <textarea matInput placeholder="Comment" [(ngModel)]="l2.comment"></textarea>
            </mat-form-field>
            <mat-card>
              <form [formGroup]="form">
                <input type="file" mat-raised-button color="primary" class="input-file" name="filedata"
                  (change)="onChange($event)">
                <button (click)="onSubmit(l2.id)" mat-raised-button color="primary">Upload File</button>
              </form>
              <a href="http://dev-checklist.regalix.com{{l2.document}}">{{l2.document}}</a>
            </mat-card>
          </div>
          <!-- <button mat-raised-button color="primary" [matMenuTriggerFor]="menu">Upload Document</button>
            <mat-menu #menu="matMenu">
              <button mat-menu-item (click)="openDocModel('Comment' , {})">Add Comment</button>
              <mat-divider></mat-divider>
              <button mat-menu-item (click)="openDocModel('Docx', {})">Upload Docx File</button>
              <mat-divider></mat-divider>
              <button mat-menu-item (click)="openDocModel('PDF', {})">Upload PDF</button>
              <mat-divider></mat-divider>
              <button mat-menu-item (click)="openDocModel('Link', {})">Add Link</button>
            </mat-menu> -->
        </div>
        <ng-container *ngIf="l2.selectedOption">
          <div class="aside-content l3"
            *ngFor="let l3 of currentCategory.questions | subQuestions: l2.id : l2.selectedOption">
            <p>{{l3.question}} <i *ngIf="l3.tooltip !== null" class="material-icons" [matTooltip]="l3.tooltip"
                matTooltipClass="tooltip-blue" matTooltipPosition="right">
                info
              </i>
              <span class="score">Score : {{l3.score}}</span>
            </p>
            <div class="optionss">
              <mat-radio-group aria-labelledby="example-radio-group-label" class="example-radio-group"
                [(ngModel)]="l3.selectedOption">
                <mat-radio-button class="example-radio-button" *ngFor="let option of options;" [value]="option.qId"
                  (change)="onRadioOptionChangeLevel3(l3.id, option.qId)">

                  {{option.ans}}
                </mat-radio-button>
              </mat-radio-group>
              <div class="comment">
                <mat-form-field appearance="outline">
                  <mat-label>Add Comment</mat-label>
                  <textarea matInput placeholder="Comment" [(ngModel)]="l3.comment"></textarea>
                </mat-form-field>
                <mat-card>
                  <form [formGroup]="form">
                    <input type="file" mat-raised-button color="primary" class="input-file" name="filedata"
                      (change)="onChange($event)">
                    <button (click)="onSubmit(l3.id)" mat-raised-button color="primary">Upload File</button>
                  </form>
                  <a href="http://dev-checklist.regalix.com/{{l3.document}}">{{l3.document}}</a>
                </mat-card>
              </div>
              <!-- <button mat-raised-button color="primary" [matMenuTriggerFor]="menu">Upload Document</button>
            <mat-menu #menu="matMenu">
              <button mat-menu-item (click)="openDocModel('Comment' , {})">Add Comment</button>
              <mat-divider></mat-divider>
              <button mat-menu-item (click)="openDocModel('Docx', {})">Upload Docx File</button>
              <mat-divider></mat-divider>
              <button mat-menu-item (click)="openDocModel('PDF', {})">Upload PDF</button>
              <mat-divider></mat-divider>
              <button mat-menu-item (click)="openDocModel('Link', {})">Add Link</button>
            </mat-menu> -->
            </div>
          </div>
        </ng-container>

        <mat-divider></mat-divider>
      </div>
      <!-- {{questiondatalevel3 | json}} -->

      <div class="btn-save">
        <button mat-raised-button color="primary" *ngIf="!currentCategory.status" (click)="postUserResponseData()">Submit {{currentCategory.name}} Response</button>
      </div>
<!-- {{currentCategory | json}} -->
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>